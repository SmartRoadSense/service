<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="media/logo-small.png">

    <title>SRS | Open Data</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!-- Custom styles for this template -->
    <link href="styles/main.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
<!-- Fixed navbar -->
<div id="srs-navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <img class="srs-logo" src="media/logo-small.png">

        <div class="navbar-header"><a class="navbar-brand" href="index.html">SmartRoadSense</a>
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-menubuilder"><span
                    class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span
                    class="icon-bar"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse navbar-menubuilder">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/open-data.html">EN</a></li>
                <li><a href="/project-it.html">Project</a></li>
                <li class=active><a href="/open-data-it.html">Open Data</a></li>
                <li><a href="/app-it.html">App</a></li>
                <li><a href="/about-it.html">About</a> </li>
               	<li><a href="/blog/">Blog</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container">

    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
        <h2>Open Data</h2>
        <hr>
        <h2>Download</h2>
        <li style="font-size: 16pt">
            <a href="/open_data.zip">SRS data</a>
			<h2>Licenza</h2>

			<p>I dati di <i>SmartRoadSense</i> sono generati dai contributi di centinaia di individui
			e vengono rilasciati come <b>open data</b> sotto licenza
				<a href="http://opendatacommons.org/licenses/odbl/">Open Data Commons Open Database License</a> (ODbL).
			</p>

			<p>Chiunque è libero di accedere a, copiare, distribuire, trasmettere ed adattare i dati del servizio,
			fintantoché i riferimenti a <i>SmartRoadSense</i> ed ai propri contributori vengono lasciati intatti.
			Eventuali dati alterati o derivati dai dati originali devono essere distribuiti sotto la medesima licenza.
			L'intero <a href="http://opendatacommons.org/licenses/odbl/1.0/">testo legale della licenza</a> contiene
			tutti i diritti e le responsabilità.
			</p>

			<p>L'origine dei dati deve essere attribuita usando la dicitura “&copy; SmartRoadSense contributors”,
			rendendo evidente la licenza di distribuzione ed, eventualmente, includendo un collegamento a questa pagina.
			</p>

            <h2>Come interpretare i dati</h2>

            <p>I dati sono distribuiti in un unico file csv compresso. I dati sull'irregolarità (roughness) del manto
                stradale sono forniti in modo puntuale. Ogni punto rappresenta un tratto di strada di circa 20 metri e
                assume un valore di roughness mediato tra tutte le rilevazioni ottenute per quel tratto di strada.</p>

            <p>Le colonne della tabella vanno così interpretate:
            <ul>
                <li>LATITUDE, latitudine del punto rappresentativo del tratto di strada;</li>
                <li>LONGITUDE, longitudine del punto rappresentativo del tratto di strada;</li>
                <li>PPE, valore medio di roughness riportato nel tratto di strada;</li>
                <li>OSM_ID, identificativo della strada in OpenStreetMap;</li>
                <li>HIGHWAY, categoria di strada secondo la classificazione di OpenStreetMap;</li>
                <li>UPDATED_AT, data dell'ultimo aggiornamento del dato.</li>
            </ul>
            </p>
            <h2>Aggiornamento dei dati</h2>

            <p>Le mappe vengono aggiornate ogni 6 ore aggregando i nuovi dati conferiti dagli utenti a quelli
                precedentemente elaborati. Il file csv viene aggiornato una volta al giorno. Rispetto alla versione
                precedente risultano invariati i punti rappresentativi di tratti di strada per i quali non sono stati
                conferiti nuovi campioni. Risultano aggiornati i punti rappresentativi di tratti di strada per i quali
                sono stati conferiti nuovi campioni. Compaiono nuovi record per i punti rappresentativi di tratti di
                strada compionati per la prima volta.
            </p>

            <h2>Storicizzazione</h2>

            <p>I dati verranno storicizzati, archiviando i file csv ogni settimana.
	        Questo consente di costruire rappresentazioni evolutive della situazione delle strade italiane.
            </p>

            <h2>Rappresentazione</h2>

            <p>Le mappe interattive pubblicate su questo sito rappresentano solo due delle possibili forme di
                rappresentazione dei dati. Invitiamo gli utenti ad elaborare e pubblicare nuove rappresentazioni
                segnalandole all'indirizzo <a href="mailto:SRS Information Center<info@smartroadsense.it>">info@smartroadsense.it</a>
            </p>

            <h2>Consistenza dei dati</h2>

            <!-- samples collected -->
            <table class="counters" style="font-size: 21px;font-weight: 200;">
                <tr>
                    <td style="text-align: right">Dati elaborati: &nbsp&nbsp</td>
                    <td id="axis_data"></td>
                </tr>
                <tr>
                    <td style="text-align: right">Campioni ricevuti: &nbsp&nbsp</td>
                    <td id="raw_data"></td>
                </tr>
                <tr>
                    <td style="text-align: right">Strade monitorate: &nbsp&nbsp</td>
                    <td id="kilometres_data"></td>
                </tr>

            </table>

            <h2>Open Data API</h2>

            <p>The data API for SmartRoadSense is currently under development. Currently, a single data access end-point is provided.</p>
            <p>Data returned by the API does include aggregated roughness data. Data quality indicators and car occupancy rate are currently not returned by the API.</p>

            <h3>Get aggregated data points in region</h3>

            <p><tt>GET http://smartroadsense.it/bb/&lt;xmin&gt;/&lt;ymin&gt;/&lt;xmax&gt;/&lt;ymax&gt;/</tt></p>

            <p>Retrieves a list of aggregated data points from a geographical region. The path includes 4 parameters: <i>xmin</i> and <i>ymin</i>, coordinates of the region’s bottom-left corner, <i>xmax</i> and <i>ymax</i> coordinates of the region’s top-right corner. The end-point is constrained to regions no larger than 2.000&nbsp;km<sup>2</sup>.</p>

            <p>Sample results:</p>
            <ul>
                <li><a href="200.json">Success</a>, HTTP #200.</li>
                <li><a href="400-too-big.json">Region too big</a>, HTTP #400.</li>
                <li><a href="400.json">Parameters not valid</a>, HTTP #400.</li>
                <li><a href="500.json">Internal error</a>, HTTP #500.</li>
            </ul>
    </div>

</div>
<!-- /container -->

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<!-- Latest compiled and minified JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="/scripts/analytics.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<!--<script src="js/ie10-viewport-bug-workaround.js"></script> -->
<script>
    // The Google Geocoding API url used to get the JSON data
    var geocodingAPI = "/ws/count.php";

    $.getJSON(geocodingAPI, function(json) {

        // Set the variables from the results array
        var raw = json.count_raw;
        console.log('Raw#', raw);

        var aggregated = json.count_aggregate;
        console.log('Aggregated#', aggregated);

        var kilometres = aggregated * 20 / 1000;
        var axis_data = raw * 300;

        // Set the table td text
        $('#axis_data').text(addCommas(axis_data) + ' valori di accelerazione')
        $('#raw_data').text(addCommas(raw) + ' punti');
        $('#kilometres_data').text(addCommas(kilometres) + ' Km');
    });

    function addCommas(nStr) {
        nStr += '';
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        }
        return x1 + x2;
    }
</script>
</body>
</html>
